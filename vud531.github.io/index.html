<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>ESL Reading</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <h3>Click on the passage title to expand the passage</h3>

  <div id="passage-list">

  </div>

 <script type="text/javascript">

  var data = ['passage 1', 'passage 2', 'passsge 3'];

  function generateTitlesList(dataArray) {
  // create the list element
    var list = document.createElement('ul');

    for (var i = 0; i < dataArray.length; i++ ) {
      // create list item
      var item = document.createElement('li');

      var pHeader = document.createElement('h4')
      pHeader.appendChild(document.createTextNode(dataArray[i]));

      // set list content
      item.appendChild(pHeader);

      let itemId = `passage${i}`

      item.setAttribute('id', itemId);
      item.childNodes[0].setAttribute('onClick',`getFullPassage('${itemId}')`)

      // appent item to list
      list.appendChild(item);

    }

    return list;
  }

  document.getElementById('passage-list').appendChild(generateTitlesList(data));

  // add click event to passage list item
  var passageList = document.getElementById('passage-list');

  function getFullPassage(id) {

    var pBody = document.createElement('p');
    pBody.appendChild(document.createTextNode("This is passage " + id));

    var item = document.getElementById(id);
    item.childNodes[0].setAttribute('onClick',`closePassage('${id}')`);
    item.appendChild(pBody);
    
  }

  function closePassage(id) {
    var item = document.getElementById(id);
    item.removeChild(item.childNodes[1]);
    item.childNodes[0].setAttribute('onClick',`getFullPassage('${id}')`);
  }

</script>

</body>
</html>
